function getTranslations() {
  return {
    en: {
      success: {
        title: "RSVP Submitted Successfully!",
        subtitle: "Thank you for your response. We're excited to celebrate with you!",
        updateTitle: "RSVP Updated Successfully!",
        updateSubtitle: "Your RSVP information has been successfully updated.",
        updateNotice: "Your previous RSVP has been updated with the new information.",
        submissionId: "Submission ID:",
        detailsHeader: "Your Details",
        guestOf: "Guest of:",
        groom: "Groom",
        bride: "Bride", 
        name: "Name:",
        furigana: "Furigana:",
        email: "Email:",
        phone: "Phone:",
        address: "Address:",
        dietary: "Dietary:",
        message: "Message:",
        closeTab: "Close Tab",
        print: "Print",
        footer: {
          changes: "If you need to make changes, please contact us directly.",
          confirmation: "We'll send a confirmation email shortly.",
          celebration: "ğŸ Thank you for being part of our autumn celebration ğŸ‚"
        }
      },

      error: {
        title: "Submission Error",
        subtitle: "We encountered an issue while processing your RSVP.",
        errorDetails: "ğŸ‚ Error Details",
        errorGeneric: "An error occurred while processing your request.",
        goBack: "Go Back & Retry",
        closeTab: "Close Tab",
        footer: {
          tryAgain: "Please try again or contact us directly if the problem persists.",
          contactHeader: "ğŸ“ Contact Information",
          email: "Email: rezi.rusnadi94@gmail.com",
          phone: "Phone: +818071811500",
          apology: "ğŸ We apologize for any inconvenience ğŸ‚"
        }
      },

      common: {
        loading: "Loading...",
        close: "Close",
        confirm: "Close this window?"
      }
    },
    
    ja: {
      success: {
        title: "é€ä¿¡å®Œäº†ï¼",
        subtitle: "ã”å‡ºå¸­ã®ç¢ºèªã‚’ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™",
        updateTitle: "æ›´æ–°å®Œäº†ï¼",
        updateSubtitle: "æƒ…å ±ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚",
        updateNotice: "æ–°ã—ã„æƒ…å ±ã§æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚",
        submissionId: "æå‡ºID:",
        detailsHeader: "ã”è©³ç´°",
        guestOf: "ã‚²ã‚¹ãƒˆ:",
        groom: "æ–°éƒå´",
        bride: "æ–°å©¦å´",
        name: "ãŠåå‰:",
        furigana: "ãƒ•ãƒªã‚¬ãƒŠ:",
        email: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:",
        phone: "é›»è©±ç•ªå·:",
        address: "ä½æ‰€:",
        dietary: "é£Ÿäº‹åˆ¶é™:",
        message: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",
        closeTab: "ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹",
        print: "å°åˆ·",
        footer: {
          changes: "å¤‰æ›´ãŒå¿…è¦ã§ã—ãŸã‚‰ã€ç›´æ¥ã”é€£çµ¡ãã ã•ã„ã€‚",
          confirmation: "ç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’é–“ã‚‚ãªããŠé€ã‚Šã„ãŸã—ã¾ã™ã€‚",
          celebration: "ğŸ ç§‹ã®ç¥ã„ã®å¸­ã«ã”å‚åŠ ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ ğŸ‚"
        }
      },
      
      // Error Page  
      error: {
        title: "é€ä¿¡ã‚¨ãƒ©ãƒ¼",
        subtitle: "é€ä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
        errorDetails: "ğŸ‚ ã‚¨ãƒ©ãƒ¼è©³ç´°",
        errorGeneric: "ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ãŒã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
        goBack: "æˆ»ã‚‹",
        closeTab: "é–‰ã˜ã‚‹",
        footer: {
          tryAgain: "å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆã¯ã€ç›´æ¥ã”é€£çµ¡ãã ã•ã„ã€‚",
          contactHeader: "ğŸ“ é€£çµ¡å…ˆ",
          email: "ãƒ¡ãƒ¼ãƒ«: rezi.rusnadi94@gmail.com",
          phone: "é›»è©±: +818071811500",
          apology: "ğŸ ã”ä¸ä¾¿ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ ğŸ‚"
        }
      },
      
      // Common
      common: {
        loading: "èª­ã¿è¾¼ã¿ä¸­...",
        close: "é–‰ã˜ã‚‹",
        confirm: "ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¾ã™ã‹ï¼Ÿ"
      }
    }
  };
}

// Get translation by key and language
function getTranslation(key, lang = 'en') {
  const translations = getTranslations();
  const langData = translations[lang] || translations['en'];
  
  // Support nested keys like 'success.title'
  const keys = key.split('.');
  let value = langData;
  
  for (const k of keys) {
    value = value[k];
    if (value === undefined) {
      // Fallback to English if Japanese translation is missing
      if (lang === 'ja') {
        return getTranslation(key, 'en');
      }
      return key; // Return key if no translation found
    }
  }
  
  return value;
}

// Detect language from browser or default to English
function detectLanguage(acceptLanguage = '') {
  if (acceptLanguage.includes('ja') || acceptLanguage.includes('JP')) {
    return 'ja';
  }
  return 'en';
}

// Get error message translation
function getErrorMessage(errorKey, lang = 'en') {
  const errorMessages = {
    en: {
      'firstNameFurigana is required': 'First name furigana is required',
      'lastNameFurigana is required': 'Last name furigana is required',
      'firstName is required': 'First name is required',
      'lastName is required': 'Last name is required',
      'email is required': 'Email address is required',
      'guestType is required': 'Please select guest type',
      'Invalid email format': 'Invalid email format',
      'Failed to save data': 'Failed to save data',
      'Internal server error': 'Internal server error occurred',
      'Spreadsheet access denied': 'Unable to access spreadsheet'
    },
    ja: {
      'firstNameFurigana is required': 'åå‰ã®ãƒ•ãƒªã‚¬ãƒŠã®å…¥åŠ›ãŒå¿…è¦ã§ã™',
      'lastNameFurigana is required': 'å§“ã®ãƒ•ãƒªã‚¬ãƒŠã®å…¥åŠ›ãŒå¿…è¦ã§ã™', 
      'firstName is required': 'åå‰ã®å…¥åŠ›ãŒå¿…è¦ã§ã™',
      'lastName is required': 'å§“ã®å…¥åŠ›ãŒå¿…è¦ã§ã™',
      'email is required': 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å…¥åŠ›ãŒå¿…è¦ã§ã™',
      'guestType is required': 'ã‚²ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã®é¸æŠãŒå¿…è¦ã§ã™',
      'Invalid email format': 'ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«å½¢å¼ã§ã™',
      'Failed to save data': 'ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ',
      'Internal server error': 'å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
      'Spreadsheet access denied': 'ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚¢ã‚¯ã‚»ã‚¹ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ'
    }
  };
  
  const langData = errorMessages[lang] || errorMessages['en'];
  return langData[errorKey] || errorKey;
} 